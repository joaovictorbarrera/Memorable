<app-card class="text-lg">
    <!-- Post Header -->
    <div class="flex gap-2 items-center">
        <app-profile-icon [imageUrl]="post.userProfileImageUrl"></app-profile-icon>
        <div class="flex flex-col">
            <span>{{ post.username }}</span>
            <p class="text-stone-400 text-sm mb-2">{{ timeAgo }}</p>
        </div>

        <!-- Show edit and delete button if the current user is the author of the post -->
        @if (isCurrentUserPost()) {
            <div class="ml-auto flex gap-2">
                <button (click)="editPost()" class="cursor-pointer">
                    <mat-icon fontIcon="edit" style="color: gray;" ></mat-icon>
                </button>

                <button (click)="deletePost()" class="cursor-pointer">
                    <mat-icon fontIcon="delete" style="color: red;" ></mat-icon>
                </button>
            </div>
        }

    </div>
    <p class="py-3">{{ post.textContent }}</p>
    @if (post.imageUrl) {
        <img [src]="post.imageUrl" alt="Post image" class="w-full h-auto rounded-lg object-cover">
    }

    <!-- Thumbs Up Button -->
    <div class="flex gap-2 items-start py-3 border-t border-stone-600">
        <button (click)="toggleLike(post)" class="cursor-pointer hover:brightness-90 rounded-full">
            @if (post.isLikedByCurrentUser) {
                <mat-icon fontIcon="thumb_up" style="color: blue;" ></mat-icon>
            } @else {
                <mat-icon fontIcon="thumb_up" style="color: gray;" ></mat-icon>
            }
        </button>
        <p>{{ `${post.likeCount} like${post.likeCount !== 1 ? 's' : ''}` }}</p>
    </div>

    <!-- Comments -->
    <div class="flex flex-col text-sm">
        @for (comment of post.comments; track comment.commentId) {
            <app-comment class="pt-2" [comment]="comment"></app-comment>
        }
    </div>

    <!-- CommentCreate -->
    <div class="flex gap-2 items-center mt-3">
        <app-profile-icon class="xs:block hidden" [imageUrl]="post.userProfileImageUrl"></app-profile-icon>
        <input type="text" placeholder="Add a comment..." class="w-full p-2 bg-stone-800 rounded-lg border-stone-800/40 text-stone-100 placeholder:text-stone-500 focus-visible:ring-orange-900 focus-visible:border-orange-800">
        <app-post-button></app-post-button>
    </div>
</app-card>
